<div class="audio-player">
  <mat-card>
    <mat-card-header>
      <img class="logo" src="./logo.png" alt="pink heart music logo">
      <mat-card-title>Musical Pocket</mat-card-title>
    </mat-card-header>

    <mat-card-content>

      <div class="controls">
        <audio #audioPlayer controls (ended)="onAudioEnded(audioPlayer)">
          <source [src]="currentAudioPath" type="audio/mp3">
          Your browser does not support the <code>audio</code> element.
        </audio>

        <div class="repeat-control">
          <button mat-icon-button (click)="toggleRepeat()" [class.active]="isRepeating">
            <mat-icon> {{ isRepeating ? 'repeat_one': 'repeat'}} </mat-icon>
          </button>
        </div>
      </div>

      <mat-form-field appearance="fill">
        <mat-label>Select Audio File</mat-label>
        <mat-select [(ngModel)]="selectedAudio" (selectionChange)="onFileSelected($event.value.path)">
          @for(file of audioFiles; track file.name){
            <mat-option [value]="file">
              {{ file.name }} - {{ file.band }}
            </mat-option>
          } @empty {
            <mat-option>There are no items.</mat-option>
          }
        </mat-select>
      </mat-form-field>
      
    </mat-card-content>
  </mat-card>
</div>